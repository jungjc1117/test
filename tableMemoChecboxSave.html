<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Save Memo to GitHub</title>
</head>
<body>
    <input type="checkbox" id="myCheckbox">
    <label for="myCheckbox">Enable Feature</label><br><br>

    <textarea id="myMemo" rows="5" cols="30" placeholder="Enter memo here..."></textarea><br><br>

    <button id="saveButton">Save Settings</button>

    <script>
        document.getElementById("saveButton").addEventListener("click", async () => {
            const checkbox = document.getElementById("myCheckbox").checked;
            const memo = document.getElementById("myMemo").value;

            // Vercel 서버리스 함수의 URL을 호출합니다.
            // 로컬 개발 시에는 /api/saveMemo, 배포 후에는 /api/saveMemo
            const apiEndpoint = "/api/saveMemo"; 

            try {
                const res = await fetch(apiEndpoint, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({ checkbox, memo }) // 데이터를 JSON 형식으로 보냅니다.
                });

                if (res.ok) {
                    alert("저장 완료!");
                } else {
                    const errorText = await res.json();
                    alert("저장 실패: " + errorText.message);
                }
            } catch (error) {
                alert("서버 연결 실패: " + error.message);
            }
        });
    </script>
</body>
</html>