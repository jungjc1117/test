<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Save Memo to GitHub</title>
</head>
<body>
    <input type="checkbox" id="myCheckbox">
    <label for="myCheckbox">Enable Feature</label><br><br>

    <textarea id="myMemo" rows="5" cols="30" placeholder="Enter memo here..."></textarea><br><br>

    <button id="saveButton">Save Settings</button>

    <script>
    document.getElementById("saveButton").addEventListener("click", async () => {
        const checkbox = document.getElementById("myCheckbox").checked;
        const memo = document.getElementById("myMemo").value;

        const apiEndpoint = "https://test-sepia-two-41.vercel.app/api/tableMemoCheckboxSave"; 

        try {
            const res = await fetch(apiEndpoint, {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({ checkbox, memo })
            });

            if (res.ok) {
                alert("저장 완료!");
            } else {
                // res.ok가 false일 때, 서버가 보낸 텍스트 응답을 가져옵니다.
                // 서버에서 JSON으로 응답하도록 했으므로 .json()을 사용합니다.
                const errorData = await res.json(); 
                alert("저장 실패: " + (errorData.message || "서버 오류"));
            }
        } catch (error) {
            // fetch 자체에서 발생하는 오류 (네트워크 문제 등)
            alert("서버 연결 실패: " + error.message);
        }
    });
</script>
</body>
</html>